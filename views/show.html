<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
        <title></title>
        <script type="text/javascript">
            tstUsername = "";
            tstCurrentDate = "2015-Sept-08";
            var tt_cancel_destination = null;
            var tt_cancel_destination = "/patients/scan_barcode";
            var testsOrdered = JSON.parse('<%- testsOrdered %>');

            function setInnerHtmlData(id, result, path) {
                td = document.getElementById(id);
                td.innerHTML = "<a href =" + path + ">" + result + "</a>"
            }

            function newResults() {
                window.location = "/patients/new_lab_results/<%= patientIdentifiers['National id']%>";
            }

            function setAttributes() {
                divBtn = document.getElementById('buttons');
                divBtn.innerHTML += "<button onclick='newResults();' class='left button navButton' id='newResultsButton'><span>Enter results</span></button>"
                divBtn.innerHTML += "<button class='left button navButton' id='vlResultsButton'><span>Edit Lab results</span></button>"
            }

            function displayTestsOrdered() {
                var html = "<table>";
                for (var x = 0; x <= testsOrdered.length - 1; x++) {
                    html += "<tr>";
                    for (var y = 0; y <= testsOrdered[x].length - 1; y++) {
                        AccessionNum = testsOrdered[x][y][0];
                        TestOrdered = testsOrdered[x][y][1];
                        OrderDate = testsOrdered[x][y][2];
                        OrderTime = testsOrdered[x][y][3];
                        OrderedBy = testsOrdered[x][y][4];
                    }
                    html += "</tr>";
                    console.log('______________________________________')
                }
                html += "<table>";
            }
        </script>

        <% include header.html %>
        <style>
            #lab_results {
                border-width: 2px 0px 2px 0px;
                border-style: solid;
                height: 500px;
                padding-left: 5px;
                padding-right: 5px;
                width: 97%;
                overflow: auto; 
                margin-top: 30px;
            }

            #headdiv {
                padding-left:10px;
            }

            a {
                background-color: grey;
                border-bottom: 1px outset black;
                border-style: outset;
                border-top: 1px outset black;
                color: white;
                display: block;
                padding: 10px 16px 10px 10px;
                text-align: center;
                text-decoration: none;
            }

            td {
                padding-top: 5px;
                padding-bottom: 5px;
                width: 310px;
            }

            #vlResultsButton{
                float: left;
            }

            #details {
                -moz-user-select: none;
                background-color: #fff;
                border: 1px solid #999;
                border-radius: 20px;
                display: table;
                float: left;
                margin: 5px;
                overflow: hidden;
                padding: 10px;
                width: 25%;
            }

            .label{
                font-size: 1em;
                font-weight: bold;
                margin: 0 5px 5px;
                padding: 2px;
            }

            .identifier{
                font-weight: bold;
                font-size: 16pt; 
                padding-left: 100px;
            }

            hr{
                margin-left: -10px;
                width: 106%;
            }

            #details .label{
                padding-left: 60px;
            }
        </style>

    </head>
    <body id="mateme" onload="setTimeout('setAttributes();', 100);">
        <div id="container">
            <div id="content">
                <div id = 'headdiv'>
                    <div id="details">
                        <span class="identifier"><%= patientIdentifiers["National id"] %></span><br/>
                        <hr></hr>
                        <span class="label" style="padding-right:80px">Name</span>: <%= personNames["given_name"] + ' ' + personNames["family_name"]%> (<%= gender %>)<br />
                        <span class="label" style="padding-right:42px">Residence</span>: <%= personAddress["city_village"] %><br />
                        <span class="label" style="padding-right:92px">Age</span>: <%= age %>
                    </div>
                </div>

                <div id = "lab_results">

                </div>
                <div id="footer">
                    <div id="buttons" class="buttonsDiv" style="width: 100%;">
                        <button id="finishButton" class="button navButton green" onclick="if (tt_cancel_destination)
                                    window.location = tt_cancel_destination;"><span>Finish</span></button>
                    </div>
                    <div id="tt_extraButtons"/>
                </div>

            </div>
        </div>
    </body>
</html>
